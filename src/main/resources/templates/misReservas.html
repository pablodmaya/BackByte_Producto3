<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Mis Reservas</title>
  <link rel="stylesheet" type="text/css" th:href="@{/css/style.css}">
  <style>

        .reservas-container {
            max-width: 800px;
            margin: auto;
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        h1 {
            color: #2e8b57;
            text-align: center;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        table, th, td {
            border: 1px solid #ddd;
        }
        th, td {
            padding: 12px;
            text-align: left;
        }
        th {
            background-color: #3cb371;
            color: white;
        }
        tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        .action-buttons {
            display: flex;
            gap: 10px;
        }
        .edit-btn, .delete-btn, .more-reservations-btn {
            padding: 8px 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            text-align: center;
            font-size: 14px;
        }
        .edit-btn {
            background-color: #4CAF50;
            color: white;
            text-decoration:none;
        }
        .edit-btn:hover {
            background-color: #45a049;
        }
        .delete-btn {
            background-color: #f44336;
            color: white;
            text-decoration:none;
        }
        .delete-btn:hover {
            background-color: #e53935;
        }

        .more-reservations-btn {
            background-color: #28a745;
            margin-top: 20px;
            display: block;
            width: fit-content;
            margin-left: auto;
            margin-right: auto;
            text-decoration: none;
            font-weight: bold;
            color:white;
        }

        .mensaje-exito {

            top: 20px;
            right: 20px;
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
            padding: 10px 20px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            display: none;
            text-align:center;

        }
        .fondo-gradiente{
background: linear-gradient(to right, #dbeafe, #93c5fd, #3b82f6);
}

.saludo{
font-size: 2em; /* Tamaño grande para destacar */
    color: #ffffff; /* Texto blanco */
    text-align: center; /* Centrado horizontal */
    margin: 20px 0; /* Espaciado superior e inferior */
    text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.5); /* Sombra para darle profundidad */
    font-family: 'Arial', sans-serif; /* Fuente moderna y legible */
    letter-spacing: 1px; /* Espaciado entre letras para mayor legibilidad */
}

    </style>
</head>
<body class="fondo-gradiente">
<div th:replace="header :: header"></div>

<h1 class="saludo">Hola <span th:text="${cliente.nombre}"> </span> !</h1>
<div class="reservas-container">

  <div id="mensajeExito" class="mensaje-exito" th:if="${mensajeExito}" th:text="${mensajeExito}"></div>


  <h1>Mis Reservas</h1>

  <table>
    <thead>
    <tr>
      <th>Vehículo</th>
      <th>Fecha de Inicio</th>
      <th>Fecha de Fin</th>
      <th>Precio Total</th>
      <th>Acciones</th> <!-- Nueva columna para los botones -->
    </tr>
    </thead>
    <tbody>
    <tr th:each="alquiler, iterStat : ${alquileres}">
      <td th:text="${alquiler.vehiculo.marca + ' ' + alquiler.vehiculo.modelo}"></td>
      <td th:text="${alquiler.fecha_Inicio}"></td>
      <td th:text="${alquiler.fecha_Fin}"></td>
      <td th:text="${preciosTotales[iterStat.index]}"></td>
      <td>
        <div class="action-buttons">
          <!-- Botón de Editar -->
         <!-- <a th:href="@{/editarReserva/{id}(id=${alquiler.id_Alquiler})}" class="edit-btn">Editar</a> -->

          <!-- Botón de Eliminar -->
          <a th:href="@{/eliminarReserva/{id}(id=${alquiler.id_Alquiler}, idCliente=${idCliente})}"
             class="delete-btn"
             onclick="return confirm('¿Estás seguro de que quieres eliminar esta reserva?')">
            Eliminar
          </a>
        </div>
      </td>
    </tr>
    </tbody>
  </table>
  <a th:href="@{/}" class="more-reservations-btn">Realizar más reservas</a>
</div>
</div>

<div th:replace="footer :: footer"></div>

<!-- Script para mostrar el mensaje -->
<script>
    window.addEventListener('DOMContentLoaded', () => {
        const mensajeExito = document.getElementById('mensajeExito');
        if (mensajeExito) {
            mensajeExito.style.display = 'block';
            setTimeout(() => {
                mensajeExito.style.display = 'none';
            }, 3000); // Ocultar después de 3 segundos
        }
    });
</script>
</body>
</html>